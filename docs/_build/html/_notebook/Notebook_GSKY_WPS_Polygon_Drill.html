

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GSKY WPS Polygon Drill using python &mdash; GSKY  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> GSKY
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../_overview/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_overview/datasets.html">Datasets</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_userguide/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_userguide/gsky_through_the_web.html">GeoGLAM example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_userguide/GSKY_ArcGIS.html">ArcGIS example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_userguide/GSKY_QGIS.html">QGIS example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_userguide/install_jupyter.html">Installing Jupyter and Python</a></li>
</ul>
<p class="caption"><span class="caption-text">Jupyter notebooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Notebook_GSKY_WMS.html">WMS Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Notebook_GSKY_WMS_ipyleaflet.html">WMS ipyleaflet</a></li>
<li class="toctree-l1"><a class="reference internal" href="Notebook_GSKY_WCS.html">WCS Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Notebook_GSKY_ClicknShip.html">WCS Click and Ship</a></li>
<li class="toctree-l1"><a class="reference internal" href="request_GSKY_WMS_sentinel2_bushfire_NSW_Sep2019.html">Create a GIF using GSKY WMS endpoints</a></li>
</ul>
<p class="caption"><span class="caption-text">OGC web services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_ogc/WMS.html">WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_ogc/WCS.html">WCS</a></li>
</ul>
<p class="caption"><span class="caption-text">GSKY Source code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_source/source.html">Source code</a></li>
</ul>
<p class="caption"><span class="caption-text">GSKY license</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_license/license.html">License</a></li>
</ul>
<p class="caption"><span class="caption-text">Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_help/help.html">Help</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GSKY</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>GSKY WPS Polygon Drill using python</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/_notebook/Notebook_GSKY_WPS_Polygon_Drill.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="GSKY-WPS-Polygon-Drill-using-python">
<h1>GSKY WPS Polygon Drill using python<a class="headerlink" href="#GSKY-WPS-Polygon-Drill-using-python" title="Permalink to this headline">¶</a></h1>
<div class="section" id="GetCapabilities">
<h2>GetCapabilities<a class="headerlink" href="#GetCapabilities" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Import python libraries</span>


<span class="c1">#######################################################</span>
<span class="c1">#   OWSLib is a Python package for client             #</span>
<span class="c1">#   programming with Open Geospatial Consortium (OGC) #</span>
<span class="c1">#   web service (hence OWS)interface standards,       #</span>
<span class="c1">#   and their related content models.                 #</span>
<span class="c1">#######################################################</span>


<span class="kn">from</span> <span class="nn">owslib.wcs</span> <span class="kn">import</span> <span class="n">WebCoverageService</span>
<span class="kn">from</span> <span class="nn">owslib.wps</span> <span class="kn">import</span> <span class="n">WebProcessingService</span>
<span class="kn">from</span> <span class="nn">owslib.wps</span> <span class="kn">import</span> <span class="n">printInputOutput</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="c1">### Link to GSKY WPS</span>

<span class="n">gsky_url</span> <span class="o">=</span> <span class="s1">&#39;http://130.56.242.16/ows/internal/wps&#39;</span>
<span class="c1">#gsky_url = &#39;http://130.56.242.16/ows/edge/generic_wps&#39;</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Define the WPS</span>

<span class="n">wps</span> <span class="o">=</span> <span class="n">WebProcessingService</span><span class="p">(</span><span class="n">gsky_url</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">skip_caps</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">wps</span><span class="o">.</span><span class="n">getcapabilities</span><span class="p">()</span>
<span class="n">wps</span><span class="o">.</span><span class="n">identification</span><span class="o">.</span><span class="n">title</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;GSKY WPS&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># View the wps abstract</span>

<span class="nb">print</span><span class="p">(</span><span class="n">wps</span><span class="o">.</span><span class="n">identification</span><span class="o">.</span><span class="n">abstract</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">wps</span><span class="o">.</span><span class="n">identification</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">wps</span><span class="o">.</span><span class="n">identification</span><span class="o">.</span><span class="n">accessconstraints</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">wps</span><span class="o">.</span><span class="n">identification</span><span class="o">.</span><span class="n">version</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
GSKY - A Scalable, Distributed Geospatial Data Service. https://geonetwork.nci.org.au/geonetwork/srv/eng/catalog.search#/metadata/dc9fb2db-8d6f-4b76-a734-93ac7fbc9201
WPS
None
1.0.0
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Print WPS operations</span>

<span class="k">for</span> <span class="n">operation</span> <span class="ow">in</span> <span class="n">wps</span><span class="o">.</span><span class="n">operations</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">operation</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
GetCapabilities
DescribeProcess
Execute
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># List the WPS processes available</span>

<span class="k">for</span> <span class="n">process</span> <span class="ow">in</span> <span class="n">wps</span><span class="o">.</span><span class="n">processes</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">identifier</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
LS8 NBART Polygon Drill Raw Bands
LS8 NBART Pixel Drill Raw Bands
LS8 NBART Polygon Drill NDVI NDWI
LS8 NBART Pixel Drill NDVI NDWI
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># List the WPS processes available</span>

<span class="k">for</span> <span class="n">process</span> <span class="ow">in</span> <span class="n">wps</span><span class="o">.</span><span class="n">processes</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">process</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
LS8 NBART Polygon Drill Raw Bands LS8 NBART Polygon Drill (Raw bands)
LS8 NBART Pixel Drill Raw Bands LS8 NBART Pixel Drill (Raw bands)
LS8 NBART Polygon Drill NDVI NDWI LS8 NBART Polygon Drill (NDVI NDWI)
LS8 NBART Pixel Drill NDVI NDWI LS8 NBART Pixel Drill (NDVI NDWI)
</pre></div></div>
</div>
</div>
<div class="section" id="DescribeProcess">
<h2>DescribeProcess<a class="headerlink" href="#DescribeProcess" title="Permalink to this headline">¶</a></h2>
<p>Determine how a specific process needs to be invoked - i.e. what are its input parameters, and output result:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">wps</span> <span class="o">=</span> <span class="n">WebProcessingService</span><span class="p">(</span><span class="n">gsky_url</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">skip_caps</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">process</span> <span class="o">=</span> <span class="n">wps</span><span class="o">.</span><span class="n">describeprocess</span><span class="p">(</span><span class="s1">&#39;LS8 NBART Polygon Drill Raw Bands&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">process</span><span class="o">.</span><span class="n">identifier</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;LS8 NBART Polygon Drill Raw Bands&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">process</span><span class="o">.</span><span class="n">processOutputs</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">dataType</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">defaultValue</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Time Series Output Result ComplexData &lt;owslib.wps.ComplexData object at 0x122a76860&gt;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="nb">input</span> <span class="ow">in</span> <span class="n">process</span><span class="o">.</span><span class="n">dataInputs</span><span class="p">:</span>
    <span class="n">printInputOutput</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
 identifier=start_datetime, title=Start datetime, abstract=None, data type=ComplexData
 Supported Value: mimeType=application/vnd.geo+json, encoding=None, schema=http://www.w3.org/TR/xmlschema-2/#dateTime
 Default Value: mimeType=application/vnd.geo+json, encoding=None, schema=http://www.w3.org/TR/xmlschema-2/#dateTime
 minOccurs=0, maxOccurs=1
 identifier=end_datetime, title=End datetime, abstract=None, data type=ComplexData
 Supported Value: mimeType=application/vnd.geo+json, encoding=None, schema=http://www.w3.org/TR/xmlschema-2/#dateTime
 Default Value: mimeType=application/vnd.geo+json, encoding=None, schema=http://www.w3.org/TR/xmlschema-2/#dateTime
 minOccurs=0, maxOccurs=1
 identifier=geometry, title=Polygon geometry, abstract=None, data type=ComplexData
 Supported Value: mimeType=application/vnd.geo+json, encoding=None, schema=http://geojson.org/geojson-spec.html#polygon
 Default Value: mimeType=application/vnd.geo+json, encoding=None, schema=http://geojson.org/geojson-spec.html#polygon
 minOccurs=1, maxOccurs=1
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">process</span><span class="o">.</span><span class="n">processOutputs</span><span class="p">:</span>
    <span class="n">printInputOutput</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
 identifier=geometry, title=Polygon geometry, abstract=None, data type=ComplexData
 Supported Value: mimeType=application/vnd.geo+json, encoding=None, schema=http://geojson.org/geojson-spec.html#polygon
 Default Value: mimeType=application/vnd.geo+json, encoding=None, schema=http://geojson.org/geojson-spec.html#polygon
 minOccurs=1, maxOccurs=1
</pre></div></div>
</div>
</div>
<div class="section" id="Execute">
<h2>Execute<a class="headerlink" href="#Execute" title="Permalink to this headline">¶</a></h2>
<p>Submit an execute request (extraction of a climate index variable over a specific GML polygon, for a given period of time), monitor the execution until complete:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="k">def</span> <span class="nf">get_request</span><span class="p">(</span><span class="n">process_id</span><span class="p">,</span> <span class="n">start_datetime</span><span class="p">,</span> <span class="n">end_datetime</span><span class="p">,</span> <span class="n">geometry</span><span class="p">):</span>
    <span class="k">return</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="s2">&lt;wps:Execute version=&quot;1.0.0&quot; service=&quot;WPS&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://www.opengis.net/wps/1.0.0&quot; xmlns:wfs=&quot;http://www.opengis.net/wfs&quot; xmlns:wps=&quot;http://www.opengis.net/wps/1.0.0&quot; xmlns:ows=&quot;http://www.opengis.net/ows/1.1&quot; xmlns:gml=&quot;http://www.opengis.net/gml&quot; xmlns:ogc=&quot;http://www.opengis.net/ogc&quot; xmlns:wcs=&quot;http://www.opengis.net/wcs/1.1.1&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; xsi:schemaLocation=&quot;http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd&quot;&gt;</span>
<span class="s2">  &lt;ows:Identifier&gt;</span><span class="si">%s</span><span class="s2">&lt;/ows:Identifier&gt;</span>
<span class="s2">  &lt;wps:DataInputs&gt;</span>
<span class="s2">    &lt;wps:Input&gt;</span>
<span class="s2">      &lt;ows:Identifier&gt;start_datetime&lt;/ows:Identifier&gt;</span>
<span class="s2">      &lt;wps:Data&gt;</span>
<span class="s2">        &lt;wps:ComplexData&gt;{&quot;type&quot;:&quot;object&quot;,&quot;properties&quot;:{&quot;timestamp&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;format&quot;:&quot;date-time&quot;,&quot;date-time&quot;:&quot;</span><span class="si">%s</span><span class="s2">&quot;}}}&lt;/wps:ComplexData&gt;</span>
<span class="s2">      &lt;/wps:Data&gt;</span>
<span class="s2">    &lt;/wps:Input&gt;</span>
<span class="s2">    &lt;wps:Input&gt;</span>
<span class="s2">      &lt;ows:Identifier&gt;end_datetime&lt;/ows:Identifier&gt;</span>
<span class="s2">      &lt;wps:Data&gt;</span>
<span class="s2">        &lt;wps:ComplexData&gt;{&quot;type&quot;:&quot;object&quot;,&quot;properties&quot;:{&quot;timestamp&quot;:{&quot;type&quot;:&quot;string&quot;,&quot;format&quot;:&quot;date-time&quot;,&quot;date-time&quot;:&quot;</span><span class="si">%s</span><span class="s2">&quot;}}}&lt;/wps:ComplexData&gt;</span>
<span class="s2">      &lt;/wps:Data&gt;</span>
<span class="s2">    &lt;/wps:Input&gt;</span>
<span class="s2">    &lt;wps:Input&gt;</span>
<span class="s2">      &lt;ows:Identifier&gt;geometry&lt;/ows:Identifier&gt;</span>
<span class="s2">      &lt;wps:Data&gt;</span>
<span class="s2">        &lt;wps:ComplexData&gt;{&quot;type&quot;:&quot;FeatureCollection&quot;,&quot;features&quot;:[{&quot;type&quot;:&quot;Feature&quot;,&quot;geometry&quot;:{&quot;type&quot;:&quot;Polygon&quot;,&quot;coordinates&quot;:[[</span><span class="si">%s</span><span class="s2">]]}}]}&lt;/wps:ComplexData&gt;</span>
<span class="s2">      &lt;/wps:Data&gt;</span>
<span class="s2">    &lt;/wps:Input&gt;</span>
<span class="s2">  &lt;/wps:DataInputs&gt;</span>
<span class="s2">  &lt;wps:ResponseForm&gt;</span>
<span class="s2">    &lt;wps:ResponseDocument storeExecuteResponse=&quot;true&quot; status=&quot;true&quot;/&gt;</span>
<span class="s2">  &lt;/wps:ResponseForm&gt;</span>
<span class="s2">&lt;/wps:Execute&gt;</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">process_id</span><span class="p">,</span> <span class="n">start_datetime</span><span class="p">,</span> <span class="n">end_datetime</span><span class="p">,</span> <span class="n">geometry</span><span class="p">)</span>

<span class="n">req</span> <span class="o">=</span> <span class="n">get_request</span><span class="p">(</span><span class="s2">&quot;LS8 NBART Polygon Drill Raw Bands&quot;</span><span class="p">,</span> <span class="s2">&quot;2016-02-15T00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;2016-10-22T00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;[114.4,-28.1],[114.8,-28.13],[114.8,-27.94],[114.4,-27.94],[114.4,-28.12]&quot;</span><span class="p">)</span>

<span class="n">execution</span> <span class="o">=</span> <span class="n">wps</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">req</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;sync&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;output&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)])</span>
<span class="n">outputRaw</span> <span class="o">=</span> <span class="n">execution</span><span class="o">.</span><span class="n">processOutputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">outputRaw</span><span class="p">)</span>

<span class="c1"># output.data is the csv payload returned from the polygon drill WPS</span>
<span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">])</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
date,Red,Nir
2016-02-15T02:16:33.000Z,1887.620359,2746.580242
2016-02-15T02:16:57.000Z,1906.003066,2775.218789
2016-02-22T02:22:42.000Z,,
2016-02-22T02:23:05.000Z,,
2016-02-24T02:10:20.000Z,,
2016-02-24T02:10:44.000Z,,
2016-03-02T02:16:31.000Z,1937.491677,2795.786958
2016-03-02T02:16:55.000Z,1917.746013,2800.477701
2016-03-09T02:22:40.000Z,,
2016-03-09T02:23:04.000Z,,
2016-03-11T02:10:18.000Z,,
2016-03-11T02:10:42.000Z,,
2016-03-18T02:16:26.000Z,2009.859653,2866.939242
2016-03-18T02:16:49.000Z,1989.427765,2865.954440
2016-03-25T02:22:32.000Z,,
2016-03-25T02:22:56.000Z,,
2016-03-27T02:10:09.000Z,,
2016-03-27T02:10:33.000Z,,
2016-04-03T02:16:16.000Z,1871.431702,2669.126961
2016-04-03T02:16:40.000Z,1878.737229,2700.615954
2016-04-10T02:22:25.000Z,,
2016-04-10T02:22:49.000Z,,
2016-04-12T02:10:03.000Z,,
2016-04-12T02:10:27.000Z,,
2016-04-19T02:16:10.000Z,1986.719429,2766.400233
2016-04-19T02:16:34.000Z,2087.038900,2903.084727
2016-04-26T02:22:19.000Z,,
2016-04-26T02:22:43.000Z,,
2016-04-28T02:10:00.000Z,,
2016-04-28T02:10:24.000Z,,
2016-05-05T02:16:14.000Z,1806.244446,2653.480404
2016-05-05T02:16:38.000Z,1805.962034,2704.668503
2016-05-12T02:22:20.000Z,,
2016-05-12T02:22:44.000Z,,
2016-05-14T02:09:59.000Z,,
2016-05-14T02:10:23.000Z,,
2016-05-21T02:16:13.000Z,8044.116359,7719.370927
2016-05-21T02:16:37.000Z,8015.005028,7631.987520
2016-05-28T02:22:27.000Z,,
2016-05-28T02:22:51.000Z,,
2016-05-30T02:10:06.000Z,,
2016-05-30T02:10:29.000Z,,
2016-06-06T02:16:18.000Z,2603.428695,3384.737055
2016-06-06T02:16:42.000Z,3167.940727,3893.489440
2016-06-13T02:22:30.000Z,,
2016-06-13T02:22:54.000Z,,
2016-06-15T02:10:08.000Z,,
2016-06-15T02:10:32.000Z,,
2016-06-22T02:16:23.000Z,1130.373659,2721.646486
2016-06-22T02:16:47.000Z,1135.094857,2769.031927
2016-06-29T02:22:38.000Z,,
2016-06-29T02:23:02.000Z,,
2016-07-01T02:10:17.000Z,,
2016-07-01T02:10:41.000Z,,
2016-07-08T02:16:31.000Z,1757.489084,3145.587641
2016-07-08T02:16:55.000Z,1463.544274,2889.595417
2016-07-15T02:22:45.000Z,,
2016-07-15T02:23:09.000Z,,
2016-07-17T02:10:24.000Z,,
2016-07-17T02:10:48.000Z,,
2016-07-24T02:16:37.000Z,869.301609,3444.046237
2016-07-24T02:17:01.000Z,881.852222,3441.096096
2016-07-31T02:22:49.000Z,,
2016-07-31T02:23:13.000Z,,
2016-08-02T02:10:28.000Z,,
2016-08-02T02:10:51.000Z,,
2016-08-09T02:16:39.000Z,1774.172309,4018.995902
2016-08-09T02:17:03.000Z,2121.112196,4220.202734
2016-08-16T02:22:52.000Z,,
2016-08-16T02:23:16.000Z,,
2016-08-18T02:10:32.000Z,,
2016-08-18T02:10:56.000Z,,
2016-08-25T02:16:46.000Z,825.829138,3452.672874
2016-08-25T02:17:10.000Z,829.009577,3465.701279
2016-09-01T02:22:59.000Z,,
2016-09-01T02:23:23.000Z,,
2016-09-03T02:10:38.000Z,,
2016-09-03T02:11:02.000Z,,
2016-09-10T02:16:50.000Z,883.706222,3286.153570
2016-09-10T02:17:14.000Z,894.546829,3301.109320
2016-09-17T02:23:02.000Z,,
2016-09-17T02:23:26.000Z,,
2016-09-19T02:10:40.000Z,,
2016-09-19T02:11:04.000Z,,
2016-09-26T02:16:51.000Z,1024.840847,2933.870570
2016-09-26T02:17:15.000Z,1007.594430,2962.941557
2016-10-03T02:23:03.000Z,,
2016-10-03T02:23:27.000Z,,
2016-10-05T02:10:43.000Z,,
2016-10-05T02:11:06.000Z,,
2016-10-12T02:16:56.000Z,1325.660470,2645.647880
2016-10-12T02:17:20.000Z,1319.880195,2693.013161
2016-10-19T02:23:08.000Z,,
2016-10-19T02:23:32.000Z,,
2016-10-21T02:10:47.000Z,,
2016-10-21T02:11:11.000Z,,

</pre></div></div>
</div>
<p>This can also be done using the command line via POST:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">subprocess</span>

<span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="s1">&#39;curl&#39;</span><span class="p">,</span> <span class="s1">&#39;-X&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s1">&#39;@payload.xml&#39;</span><span class="p">,</span> <span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;result_22nov.json&#39;</span><span class="p">,</span> <span class="s1">&#39;http://130.56.242.16/ows/internal/wps?service=WPS&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0
</pre></div></div>
</div>
</div>
<div class="section" id="Plotting-output-of-WPS-request">
<h2>Plotting output of WPS request<a class="headerlink" href="#Plotting-output-of-WPS-request" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Import libraries</span>

<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dt</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>

<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">gridplot</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">output_file</span>

</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># extract the data we want to plot</span>

<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;result_long.txt&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inputfile</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">inputfile</span><span class="p">):</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">orig_dates</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">::</span><span class="mi">5</span><span class="p">]</span>
<span class="n">orig_PV</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">5</span><span class="p">]</span>
<span class="n">orig_NPV</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">2</span><span class="p">::</span><span class="mi">5</span><span class="p">]</span>
<span class="n">orig_BS</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">3</span><span class="p">::</span><span class="mi">5</span><span class="p">]</span>
<span class="n">orig_Total</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">4</span><span class="p">::</span><span class="mi">5</span><span class="p">]</span>

<span class="n">dates_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">orig_dates</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">])</span>
<span class="n">PV_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">orig_PV</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">])</span>
<span class="n">NPV_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">orig_NPV</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">])</span>
<span class="n">BS_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">orig_BS</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">])</span>
<span class="n">Total_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">orig_Total</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">])</span>

<span class="n">PV</span> <span class="o">=</span> <span class="n">PV_array</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
<span class="n">NPV</span> <span class="o">=</span> <span class="n">NPV_array</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
<span class="n">BS</span> <span class="o">=</span> <span class="n">BS_array</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
<span class="n">Total</span> <span class="o">=</span> <span class="n">Total_array</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>

<span class="c1"># make dates python plottable</span>
<span class="n">dt_dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">date</span><span class="p">,</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S.000Z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="k">for</span> <span class="n">date</span> <span class="ow">in</span> <span class="n">dates_array</span> <span class="p">]</span>
<span class="n">dates</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">date2num</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dt_dates</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p><strong>Plotting our time-series using Bokeh</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">######################################################################################################</span>
<span class="c1">#                                                                                                    #</span>
<span class="c1">#   Bokeh is an interactive visualization library that targets modern web browsers for presentation. #</span>
<span class="c1">#   Its goal is to provide elegant, concise construction of versatile graphics, and to extend this   #</span>
<span class="c1">#   capability with high-performance interactivity over very large or streaming datasets.            #</span>
<span class="c1">#                                                                                                    #</span>
<span class="c1">#   For more information about Bokeh, please visit https://bokeh.pydata.org/en/latest/               #</span>
<span class="c1">#                                                                                                    #</span>
<span class="c1">######################################################################################################</span>

<span class="c1">## Plot PV NPV BS Total all on the same graph</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;8-day Fractional Cover Drill&quot;</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">1600</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">xgrid</span><span class="o">.</span><span class="n">grid_line_color</span><span class="o">=</span><span class="kc">None</span>
<span class="n">p</span><span class="o">.</span><span class="n">background_fill_color</span> <span class="o">=</span> <span class="s2">&quot;beige&quot;</span>
<span class="n">p</span><span class="o">.</span><span class="n">background_fill_alpha</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">p</span><span class="o">.</span><span class="n">ygrid</span><span class="o">.</span><span class="n">grid_line_alpha</span><span class="o">=</span><span class="mf">0.5</span>
<span class="n">p</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;Time&#39;</span>
<span class="n">p</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;%&#39;</span>

<span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dt_dates</span><span class="p">,</span> <span class="n">PV</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s1">&#39;PV&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dt_dates</span><span class="p">,</span> <span class="n">NPV</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s1">&#39;NPV&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dt_dates</span><span class="p">,</span> <span class="n">BS</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s1">&#39;BS&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dt_dates</span><span class="p">,</span> <span class="n">Total</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="s1">&#39;Total&#39;</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">## Plot seperate graphs for each of PV NPV BS Total</span>

<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">from</span> <span class="nn">bokeh.palettes</span> <span class="kn">import</span> <span class="n">Spectral6</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span><span class="p">,</span> <span class="n">DataRange1d</span><span class="p">,</span> <span class="n">Plot</span><span class="p">,</span> <span class="n">LinearAxis</span><span class="p">,</span> <span class="n">Grid</span><span class="p">,</span> <span class="n">Legend</span><span class="p">,</span> <span class="n">LegendItem</span>
<span class="kn">from</span> <span class="nn">bokeh.layouts</span> <span class="kn">import</span> <span class="n">row</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">gridplot</span>

<span class="n">p1</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;PV&quot;</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">350</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
<span class="n">p1</span><span class="o">.</span><span class="n">xgrid</span><span class="o">.</span><span class="n">grid_line_color</span><span class="o">=</span><span class="kc">None</span>
<span class="c1">#p1.background_fill_color = &quot;beige&quot;</span>
<span class="c1">#p1.background_fill_alpha = 0.5</span>
<span class="n">p1</span><span class="o">.</span><span class="n">ygrid</span><span class="o">.</span><span class="n">grid_line_alpha</span><span class="o">=</span><span class="mf">0.5</span>
<span class="n">p1</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;Time&#39;</span>
<span class="n">p1</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;%&#39;</span>
<span class="n">p1</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dt_dates</span><span class="p">,</span> <span class="n">PV</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">)</span><span class="c1">#, legend=&#39;PV&#39;)</span>

<span class="n">p2</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;NPV&quot;</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">350</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
<span class="n">p2</span><span class="o">.</span><span class="n">xgrid</span><span class="o">.</span><span class="n">grid_line_color</span><span class="o">=</span><span class="kc">None</span>
<span class="c1">#p2.background_fill_color = &quot;beige&quot;</span>
<span class="c1">#p2.background_fill_alpha = 0.5</span>
<span class="n">p2</span><span class="o">.</span><span class="n">ygrid</span><span class="o">.</span><span class="n">grid_line_alpha</span><span class="o">=</span><span class="mf">0.5</span>
<span class="n">p2</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;Time&#39;</span>
<span class="n">p2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;%&#39;</span>
<span class="n">p2</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dt_dates</span><span class="p">,</span> <span class="n">NPV</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;blue&#39;</span><span class="p">)</span><span class="c1">#, legend=&#39;NPV&#39;)</span>

<span class="n">p3</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;BS&quot;</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">350</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
<span class="n">p3</span><span class="o">.</span><span class="n">xgrid</span><span class="o">.</span><span class="n">grid_line_color</span><span class="o">=</span><span class="kc">None</span>
<span class="n">p3</span><span class="o">.</span><span class="n">ygrid</span><span class="o">.</span><span class="n">grid_line_alpha</span><span class="o">=</span><span class="mf">0.5</span>
<span class="n">p3</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;Time&#39;</span>
<span class="n">p3</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;%&#39;</span>
<span class="n">p3</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dt_dates</span><span class="p">,</span> <span class="n">BS</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">)</span><span class="c1">#, legend=&#39;BS&#39;)</span>

<span class="n">p4</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_axis_type</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Total&quot;</span><span class="p">,</span> <span class="n">plot_height</span><span class="o">=</span><span class="mi">350</span><span class="p">,</span> <span class="n">plot_width</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
<span class="n">p4</span><span class="o">.</span><span class="n">xgrid</span><span class="o">.</span><span class="n">grid_line_color</span><span class="o">=</span><span class="kc">None</span>
<span class="n">p4</span><span class="o">.</span><span class="n">ygrid</span><span class="o">.</span><span class="n">grid_line_alpha</span><span class="o">=</span><span class="mf">0.5</span>
<span class="n">p4</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;Time&#39;</span>
<span class="n">p4</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">axis_label</span> <span class="o">=</span> <span class="s1">&#39;%&#39;</span>
<span class="n">p4</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dt_dates</span><span class="p">,</span> <span class="n">Total</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;orange&#39;</span><span class="p">)</span><span class="c1">#, legend=&#39;Total&#39;)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">gridplot</span><span class="p">([[</span><span class="n">p1</span><span class="p">,</span><span class="n">p2</span><span class="p">],[</span><span class="n">p3</span><span class="p">,</span><span class="n">p4</span><span class="p">]])</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018, NCI

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>