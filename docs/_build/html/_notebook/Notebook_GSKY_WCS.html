

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using GSKY’s WCS in Python &mdash; GSKY  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GSKY Click and Ship" href="Notebook_GSKY_ClicknShip.html" />
    <link rel="prev" title="GSKY WMS with ipyleafet and widgets" href="Notebook_GSKY_WMS_ipyleaflet.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GSKY
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../_overview/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_overview/datasets.html">Datasets</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_userguide/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_userguide/gsky_through_the_web.html">GeoGLAM example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_userguide/install_jupyter.html">Installing Jupyter and Python</a></li>
</ul>
<p class="caption"><span class="caption-text">Jupyter notebooks</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Notebook_GSKY_WMS.html">WMS Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Notebook_GSKY_WMS_ipyleaflet.html">WMS ipyleaflet</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">WCS Basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Requesting-data-subsets-through-NCI’s-GSKY-Data-Server">Requesting data subsets through NCI’s GSKY Data Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Notebook_GSKY_ClicknShip.html">WCS Click and Ship</a></li>
</ul>
<p class="caption"><span class="caption-text">OGC web services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_ogc/WMS.html">WMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_ogc/WCS.html">WCS</a></li>
</ul>
<p class="caption"><span class="caption-text">GSKY Source code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_source/source.html">Source code</a></li>
</ul>
<p class="caption"><span class="caption-text">GSKY license</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_license/license.html">License</a></li>
</ul>
<p class="caption"><span class="caption-text">Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_help/help.html">Help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GSKY</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Using GSKY’s WCS in Python</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/_notebook/Notebook_GSKY_WCS.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<p><img alt="image0" src="http://nci.org.au/wp-content/themes/nci/img/img-logo-large.png" /></p>
<hr class="docutils" />
<div class="section" id="Using-GSKY’s-WCS-in-Python">
<h1>Using GSKY’s WCS in Python<a class="headerlink" href="#Using-GSKY’s-WCS-in-Python" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Requesting-data-subsets-through-NCI’s-GSKY-Data-Server">
<h2>Requesting data subsets through NCI’s GSKY Data Server<a class="headerlink" href="#Requesting-data-subsets-through-NCI’s-GSKY-Data-Server" title="Permalink to this headline">¶</a></h2>
<p>NCI’s GSKY Data Server supports the Open Geospatial Consortium (OGC) Web
Coverage Service (WCS), which is a standard protocol for serving
geospatial data in common formats such as NetCDF and GeoTIFF.</p>
<p><strong>The following libraries will need to be imported for the below
example.</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>from owslib.wcs import WebCoverageService
from PIL import Image
%matplotlib inline
</pre></div>
</div>
</div>
<p><strong>To start, we will need the base GSKY server URL:</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>gsky_url = &#39;http://gsky.nci.org.au/ows&#39;
</pre></div>
</div>
</div>
<p><strong>Now using OWSLib, we can begin by inspecting the service metadata:</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>wcs = WebCoverageService(gsky_url, version=&#39;1.0.0&#39;)
</pre></div>
</div>
</div>
<p><strong>Find out the available data layers that can be requested:</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>for layer in list(wcs.contents):
    print (&quot;Layer Name:&quot;, layer)
    print (&quot;Title:&quot;, wcs[layer].title, &#39;\n&#39;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Layer Name: hltc:high:fc
Title: DEA High Tide Composite 25m v2.0 false colour

Layer Name: hltc:high:tc
Title: DEA High Tide Composite 25m v2.0 true colour

Layer Name: hltc:low:fc
Title: DEA Low Tide Composite 25m v2.0 false colour

Layer Name: hltc:low:tc
Title: DEA Low Tide Composite 25m v2.0 true colour

Layer Name: item:relative
Title: DEA Intertidal Extents Model Relative Layer 25m v2.0

Layer Name: item:stddev
Title: DEA Intertidal Extents Model Confidence Layer 25m v2.0

Layer Name: LS5:GEOMEDIAN:FALSE
Title: DEA Landsat 5 terrain corrected surface reflectance geometric median false colour

Layer Name: LS5:GEOMEDIAN:TRUE
Title: DEA Landsat 5 terrain corrected surface reflectance geometric median true colour

Layer Name: LS5:NBAR:FALSE
Title: 16-day DEA Landsat 5 surface reflectance false colour

Layer Name: LS5:NBAR:FALSE:DAILY
Title: Daily DEA Landsat 5 surface reflectance false colour

Layer Name: LS5:NBAR:TRUE
Title: 16-day DEA Landsat 5 surface reflectance true colour

Layer Name: LS5:NBAR:TRUE:DAILY
Title: Daily DEA Landsat 5 surface reflectance true colour

Layer Name: LS5:NBART:FALSE
Title: 16-day DEA Landsat 5 terrain corrected surface reflectance false colour

Layer Name: LS5:NBART:FALSE:DAILY
Title: Daily DEA Landsat 5 terrain corrected surface reflectance false colour

Layer Name: LS5:NBART:TRUE
Title: 16-day DEA Landsat 5 terrain corrected surface reflectance true colour

Layer Name: LS5:NBART:TRUE:DAILY
Title: Daily DEA Landsat 5 terrain corrected surface reflectance true colour

Layer Name: LS7:GEOMEDIAN:FALSE
Title: DEA Landsat 7 terrain corrected surface reflectance geometric median false colour

Layer Name: LS7:GEOMEDIAN:TRUE
Title: DEA Landsat 7 terrain corrected surface reflectance geometric median true colour

Layer Name: LS7:NBAR:FALSE
Title: 16-day DEA Landsat 7 surface reflectance false colour

Layer Name: LS7:NBAR:FALSE:DAILY
Title: Daily DEA Landsat 7 surface reflectance false colour

Layer Name: LS7:NBAR:TRUE
Title: 16-day DEA Landsat 7 surface reflectance true colour

Layer Name: LS7:NBAR:TRUE:DAILY
Title: Daily DEA Landsat 7 surface reflectance true colour

Layer Name: LS7:NBART:FALSE
Title: 16-day DEA Landsat 7 terrain corrected surface reflectance false colour

Layer Name: LS7:NBART:FALSE:DAILY
Title: Daily DEA Landsat 7 terrain corrected surface reflectance false colour

Layer Name: LS7:NBART:TRUE
Title: 16-day DEA Landsat 7 terrain corrected surface reflectance true colour

Layer Name: LS7:NBART:TRUE:DAILY
Title: Daily DEA Landsat 7 terrain corrected surface reflectance true colour

Layer Name: LS8:GEOMEDIAN:FALSE
Title: DEA Landsat 8 terrain corrected surface reflectance geometric median false colour

Layer Name: LS8:GEOMEDIAN:TRUE
Title: DEA Landsat 8 terrain corrected surface reflectance geometric median true colour

Layer Name: LS8:NBAR:FALSE
Title: 16-day DEA Landsat 8 surface reflectance false colour

Layer Name: LS8:NBAR:FALSE:DAILY
Title: Daily DEA Landsat 8 surface reflectance false colour

Layer Name: LS8:NBAR:TRUE
Title: 16-day DEA Landsat 8 surface reflectance true colour

Layer Name: LS8:NBAR:TRUE:DAILY
Title: Daily DEA Landsat 8 surface reflectance true colour

Layer Name: LS8:NBART:FALSE
Title: 16-day DEA Landsat 8 terrain corrected surface reflectance false colour

Layer Name: LS8:NBART:FALSE:DAILY
Title: Daily DEA Landsat 8 terrain corrected surface reflectance false colour

Layer Name: LS8:NBART:TRUE
Title: 16-day DEA Landsat 8 terrain corrected surface reflectance true colour

Layer Name: LS8:NBART:TRUE:DAILY
Title: Daily DEA Landsat 8 terrain corrected surface reflectance true colour

Layer Name: wofs
Title: DEA Water Observation Feature Layer

</pre></div></div>
</div>
<p><strong>We can also view metadata that is available about a selected layer.
For example, you can view the abstract associated with that data
layer.</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>layer = &quot;LS8:NBAR:TRUE&quot;
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>print(wcs[layer].abstract)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
This product has been corrected to remove the influences of the atmosphere, the time of year and satellite view angles using the methods described in Li et al. 2010 https://doi.org/10.1109/JSTARS.2010.2042281. Landsat 8 Operational Land Imager (OLI) data is available from March 2013 and onwards. More detailed information about the surface reflectance product suite produced using Digital Earth Australia including CCBY4.0 is available at http://dx.doi.org/10.4225/25/5a7a501e1c5af. This service provides access to Landsat 8 OLI terrain corrected surface reflectance data. This service provides access to Landsat 8 OLI surface reflectance data. The true colour composite is composed of wavelengths of light as seen by the human eye. The image composites are made from images acquired within a 16 day period, and may include clouds.
</pre></div></div>
</div>
<p><strong>Or view the CRS options, bounding box, and time positions available
(these details will be needed to construct the GetMap request).</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>print (&quot;CRS Options: &quot;)
crs = sorted(wcs[layer].supportedCRS)
print (&#39;\t&#39;, crs, &#39;\n&#39;)

print (&quot;Bounding Box: &quot;)
bbox = wcs[layer].boundingBoxWGS84
print (&#39;\t&#39;, bbox, &#39;\n&#39;)

print (&quot;Time Positions: &quot;)
time = wcs[layer].timepositions
print (&#39;\t&#39;, time[-10:], &#39;\n&#39;)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CRS Options:
         [urn:ogc:def:crs:EPSG::4326]

Bounding Box:
         (-180.0, -90.0, 180.0, 90.0)

Time Positions:
         [&#39;2018-05-20T00:00:00.000Z&#39;, &#39;2018-06-05T00:00:00.000Z&#39;, &#39;2018-06-21T00:00:00.000Z&#39;, &#39;2018-07-07T00:00:00.000Z&#39;, &#39;2018-07-23T00:00:00.000Z&#39;, &#39;2018-08-08T00:00:00.000Z&#39;, &#39;2018-08-24T00:00:00.000Z&#39;, &#39;2018-09-09T00:00:00.000Z&#39;, &#39;2018-09-25T00:00:00.000Z&#39;, &#39;2018-10-11T00:00:00.000Z&#39;]

</pre></div></div>
</div>
<p><strong>Let’s use the information above to construct and make GetCoverage
requests.</strong></p>
<p>The below sections will demonstrate both a request in GeoTIFF and NetCDF
formats.</p>
<p><strong>We’ll need to define a bounding box for our request:</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>subset_bbox = (137,-37,140,-35)
</pre></div>
</div>
</div>
<p><strong>OWSLib’s library can now be used to make the GetCoverage request:</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>output = wcs.getCoverage(identifier=layer,
                         time=wcs[layer].timepositions[6],
                         bbox=subset_bbox,format=&#39;GeoTIFF&#39;,
                         crs=&#39;EPSG:4326&#39;, width=256, height=256)
</pre></div>
</div>
</div>
<p><strong>To view the above constructed URL:</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>print(output.geturl())
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
http://gsky.nci.org.au/ows?version=1.0.0&amp;request=GetCoverage&amp;service=WCS&amp;Coverage=LS8%3ANBAR%3ATRUE&amp;BBox=137%2C-37%2C140%2C-35&amp;time=2%2C0%2C1%2C3%2C-%2C0%2C6%2C-%2C2%2C3%2CT%2C0%2C0%2C%3A%2C0%2C0%2C%3A%2C0%2C0%2C.%2C0%2C0%2C0%2CZ&amp;crs=EPSG%3A4326&amp;format=GeoTIFF&amp;width=256&amp;height=256
</pre></div></div>
</div>
<p><strong>Write the result to a file:</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>filename = &#39;./output/gsky_wcs.tiff&#39;
with open(filename, &#39;wb&#39;) as f:
    f.write(output.read())
</pre></div>
</div>
</div>
<p><strong>And if we’d like to confirm the result, we can open and view the
GeoTIFF with the Python GDAL library for example:</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>import gdal
import matplotlib.pyplot as plt
%matplotlib inline
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>ds = gdal.Open(filename)
band = ds.GetRasterBand(1).ReadAsArray()

fig = plt.figure(figsize=(10,10))
plt.imshow(band, cmap=&#39;gist_earth&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[13]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x12482c198&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_notebook_Notebook_GSKY_WCS_25_1.png" src="../_images/_notebook_Notebook_GSKY_WCS_25_1.png" />
</div>
</div>
<p><strong>To request a coverage returned as in the NetCDF format, a similar
GetCoverage request is constructed with the format parameter now
specifying the NetCDF option.</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>subset_bbox = (137,-37,140,-35)

output = wcs.getCoverage(identifier=layer,
                         time=wcs[layer].timepositions[6],
                         bbox=subset_bbox,format=&#39;NetCDF&#39;,
                         crs=&#39;EPSG:4326&#39;, width=256, height=256)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>print(output.geturl())
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
http://gsky.nci.org.au/ows?version=1.0.0&amp;request=GetCoverage&amp;service=WCS&amp;Coverage=LS8%3ANBAR%3ATRUE&amp;BBox=137%2C-37%2C140%2C-35&amp;time=2%2C0%2C1%2C3%2C-%2C0%2C6%2C-%2C2%2C3%2CT%2C0%2C0%2C%3A%2C0%2C0%2C%3A%2C0%2C0%2C.%2C0%2C0%2C0%2CZ&amp;crs=EPSG%3A4326&amp;format=NetCDF&amp;width=256&amp;height=256
</pre></div></div>
</div>
<p><strong>Again, write the output to a file to save:</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>filename = &#39;./output/gsky_wcs.nc&#39;
with open(filename, &#39;wb&#39;) as f:
    f.write(output.read())
</pre></div>
</div>
</div>
<p><strong>To confirm or inspect the contents of the NetCDF file, libraries such
as NetCDF4 Python or GDAL can be used.</strong></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>from netCDF4 import Dataset
import numpy as np
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>with Dataset(filename) as ds:

    band = ds[&#39;Band1&#39;]
    lon = ds[&#39;lon&#39;]
    lat = ds[&#39;lat&#39;]


    # Set figure size
    plt.figure(figsize=(12,12))

    # Plot image
    plt.imshow(band, extent=[lon[0], lon[-1], lat[-1], lat[0]])

    # Add figure title and labels
    # We can make use of the defined variable attributes to do this
    plt.title(layer.title(), fontsize=20)
    plt.xlabel(lon.long_name+&#39; (&#39;+lon.units+&#39;) &#39;, fontsize=16)
    plt.ylabel(lat.long_name+&#39; (&#39;+lat.units+&#39;) &#39;, fontsize=16)


    # Adjust tick mark size
    plt.tick_params(labelsize=16)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/_notebook_Notebook_GSKY_WCS_33_0.png" src="../_images/_notebook_Notebook_GSKY_WCS_33_0.png" />
</div>
</div>
<hr class="docutils" />
<p><strong>For more information on the OGC WCS standard specifications and the
Python OWSLib package:</strong> <a class="reference external" href="http://www.opengeospatial.org/standards/wcs">http://www.opengeospatial.org/standards/wcs</a>
<a class="reference external" href="https://geopython.github.io/OWSLib/#wms">https://geopython.github.io/OWSLib/#wms</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Notebook_GSKY_ClicknShip.html" class="btn btn-neutral float-right" title="GSKY Click and Ship" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Notebook_GSKY_WMS_ipyleaflet.html" class="btn btn-neutral" title="GSKY WMS with ipyleafet and widgets" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, NCI

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>